خطة إضافة ميزة إعادة صياغة الرسائل بالذكاء الاصطناعي:

المرحلة 1: تحديث قاعدة البيانات
- إضافة حقل `aiRewrite` داخل كائن `options` في جدول `tasks` في ملف `shared/schema.ts`.
- الهيكل المقترح:
  aiRewrite: {
    isEnabled: boolean,
    provider: string,
    model: string,
    rules: { id: string, name: string, instruction: string, isActive: boolean }[]
  }

المرحلة 2: تحديث معالج التوجيه (Backend)
- تعديل `server/services/forwarder.ts` لاستدعاء خدمة الذكاء الاصطناعي لإعادة الصياغة.
- تنفيذ العملية بعد الفلاتر (Filters) وقبل الإرسال النهائي.

المرحلة 3: تحديث واجهة المستخدم (Frontend)
- إضافة قسم "تخصيص الرسالة بالذكاء الاصطناعي" في نموذج إنشاء/تعديل المهمة في `client/src/pages/tasks.tsx`.
- إضافة واجهة لإدارة قواعد إعادة الصياغة (إضافة، حذف، تفعيل/تعطيل).

المرحلة 4: الاختبار والتحقق
- التأكد من أن الرسائل يتم إعادة صياغتها فقط عند تفعيل الخيار.
- التحقق من عمل القواعد المخصصة.
